"use strict";const e=require("../../common/vendor.js"),s={name:"Trunk",data:()=>({weights:{benchPress:0,pullUp:0,inclineBenchPress:0,seatedRow:0,cableFly:0,singleArmRow:0},sets:{benchPress:0,inclineBenchPress:0,seatedRow:0,cableFly:0,singleArmRow:0},reps:{benchPress:0,inclineBenchPress:0,seatedRow:0,cableFly:0,singleArmRow:0},selectedDate:""}),methods:{trunk_submitData(){if(!this.selectedDate)return void e.index.showToast({title:"请先选择日期",icon:"none"});if(!(Object.values(this.weights).some((e=>e>0))||Object.values(this.sets).some((e=>e>0))||Object.values(this.reps).some((e=>e>0))))return void e.index.showToast({title:"请输入训练数据",icon:"none"});const s=new Date(this.selectedDate);s.setHours(12,0,0,0);const t=s.toISOString();e.index.showModal({title:"确认提交",content:`确定要提交 ${this.selectedDate} 的训练数据吗？`,success:s=>{s.confirm&&e.Ys.callFunction({name:"Mbody",data:{api:"trunk_submitData",uni_weights:this.weights,uni_sets:this.sets,uni_reps:this.reps,timestamp:t,date:this.selectedDate}}).then((()=>{e.index.showToast({title:"提交成功",icon:"success"})})).catch((s=>{console.error("提交失败:",s),e.index.showToast({title:"提交失败",icon:"none"})}))}})},trunk_getLastRecord(){if(!this.selectedDate)return void e.index.showToast({title:"请先选择日期",icon:"none"});const s=new Date(this.selectedDate);s.setHours(12,0,0,0);const t=s.toISOString();e.Ys.callFunction({name:"Mbody",data:{api:"trunk_getLastRecord",timestamp:t,date:this.selectedDate}}).then((s=>{s.result&&s.result.data?(this.weights={...this.weights,...s.result.data.uni_weights},this.sets={...this.sets,...s.result.data.uni_sets},this.reps={...this.reps,...s.result.data.uni_reps},e.index.showToast({title:"数据加载成功",icon:"success"})):e.index.showToast({title:"该日期没有记录",icon:"none"})})).catch((s=>{console.error("获取记录失败:",s),e.index.showToast({title:"获取记录失败",icon:"none"})}))},onDateChange(e){this.selectedDate=e.detail.value}}};const t=e._export_sfc(s,[["render",function(s,t,i,n,a,l){return{a:e.t(a.selectedDate||"请选择日期"),b:a.selectedDate,c:e.o(((...e)=>l.onDateChange&&l.onDateChange(...e))),d:a.weights.benchPress,e:e.o((e=>a.weights.benchPress=e.detail.value)),f:a.sets.benchPress,g:e.o((e=>a.sets.benchPress=e.detail.value)),h:a.reps.benchPress,i:e.o((e=>a.reps.benchPress=e.detail.value)),j:a.weights.pullUp,k:e.o((e=>a.weights.pullUp=e.detail.value)),l:a.reps.pullUp,m:e.o((e=>a.reps.pullUp=e.detail.value)),n:a.weights.inclineBenchPress,o:e.o((e=>a.weights.inclineBenchPress=e.detail.value)),p:a.sets.inclineBenchPress,q:e.o((e=>a.sets.inclineBenchPress=e.detail.value)),r:a.reps.inclineBenchPress,s:e.o((e=>a.reps.inclineBenchPress=e.detail.value)),t:a.weights.seatedRow,v:e.o((e=>a.weights.seatedRow=e.detail.value)),w:a.sets.seatedRow,x:e.o((e=>a.sets.seatedRow=e.detail.value)),y:a.reps.seatedRow,z:e.o((e=>a.reps.seatedRow=e.detail.value)),A:a.weights.cableFly,B:e.o((e=>a.weights.cableFly=e.detail.value)),C:a.sets.cableFly,D:e.o((e=>a.sets.cableFly=e.detail.value)),E:a.reps.cableFly,F:e.o((e=>a.reps.cableFly=e.detail.value)),G:a.weights.singleArmRow,H:e.o((e=>a.weights.singleArmRow=e.detail.value)),I:a.sets.singleArmRow,J:e.o((e=>a.sets.singleArmRow=e.detail.value)),K:a.reps.singleArmRow,L:e.o((e=>a.reps.singleArmRow=e.detail.value)),M:e.o(((...e)=>l.trunk_submitData&&l.trunk_submitData(...e))),N:e.o(((...e)=>l.trunk_getLastRecord&&l.trunk_getLastRecord(...e)))}}]]);wx.createPage(t);
